"use strict";(self.webpackChunkprismatech_webapp=self.webpackChunkprismatech_webapp||[]).push([[7581],{5620:function(e,t,n){n.d(t,{AJ:function(){return l},O_:function(){return h},PI:function(){return k},PS:function(){return p},Pu:function(){return j},XU:function(){return P},Yo:function(){return v},_W:function(){return g},dV:function(){return f},ny:function(){return b},oj:function(){return _},uX:function(){return m},wo:function(){return y}});n(72791);var r=n(91523),a=n(763),o=n.n(a),i=n(16585),c=n(80184),d=i.Z.basePath,u="product",s="/product/detail",l="/product",p=function(e){return"/".concat(u,"/upsert").concat(e?"/"+e:"")},m=function(){return"/".concat(u)},f="Buat Baru",_="Products",g="Product Detail",b="Form Product",k="upsertTokoProduct",v="getDetailTokoProduct",h="getAllTokoProducts",y="deleteTokoProduct",P="_id,content1,estimated_delivery_unit_time_instock,estimated_delivery_unit_time_preorder,estimated_delivery_time_instock,estimated_delivery_time_preorder,instock_label,preorder_policy,product_availability,stock_amount,weight,isneed_shipping,name,code,description,price,tag_id{_id, name},toko_id{_id, name},category_id{_id, title},image_id{_id, filename, filenameorigin, file_type},image_ids{_id, filename, filenameorigin, file_type},created_at,updated_at,created_by{full_name},updated_by{full_name}",j=function(e){return[{Header:" ",accessor:"_id",Cell:function(e){return(0,c.jsxs)("div",{className:"btn-group",children:[(0,c.jsx)("button",{type:"button",className:"btn btn-default dropdown-toggle dropdown-icon","data-toggle":"dropdown",children:(0,c.jsx)("span",{className:"sr-only",children:"Toggle Dropdown"})}),(0,c.jsx)("div",{className:"dropdown-menu",role:"menu",children:(0,c.jsx)(r.rU,{className:"dropdown-item",to:"".concat(d).concat(s,"/").concat(e.cell.value),children:"Detail"})})]})}},{Header:"Nama",accessor:"name"},{Header:"Kode",accessor:"code"},{Header:"Harga",accessor:"price"},{Header:"Kategori",accessor:function(e){return(0,c.jsx)("span",{children:(o().map(e.category_id,(function(e){return e.title}))||[]).join(", ")})}},{Header:"Toko",accessor:function(e){return(0,c.jsx)("span",{children:(o().map(e.toko_id,(function(e){return e.name}))||[]).join(", ")})}},{Header:"Dibuat Oleh",accessor:"created_by.full_name"}]};t.ZP={redirectAfterCreate:s,redirectAfterDelete:l,detailPageUrl:function(e){return"/".concat(u,"/detail/").concat(e)},upsertPageUrl:p,createNewButtonLabel:f,createPageTitle:"Buat Baru",listallPageTitle:_,detailPageTitle:g,upsertPageTitle:b,createService:"createTokoProduct",detailService:v,upsertService:k,listallService:h,deleteService:y,fields:P,getColumns:j,listallPageUrl:m}},55699:function(e,t,n){n.d(t,{AJ:function(){return d},O_:function(){return f},Pu:function(){return b},XU:function(){return g},Yo:function(){return m},_W:function(){return p},dV:function(){return s},oj:function(){return l},wo:function(){return _},yG:function(){return u}});n(72791);var r=n(91523),a=n(80184),o="TokoProductVariation",i="tokoproductvariation",c="TokoProductVariation",d="/"+i,u=function(e){return"/".concat(i,"/update/").concat(e)},s="Create New "+o,l="Data Inventaris",p="Data Detail Inventaris",m="getDetail"+c,f="getAllTokoProductVariations",_="delete"+c,g="_id,sku,product_id{_id,name,product_availability,preorder_policy,code,image_id{filename,file_type}},inventories{_id,quantity,created_at,updated_at,created_by{full_name},updated_by{full_name}},created_at,updated_at,created_by{full_name},updated_by{full_name}",b=function(e){e.history;var t=e.stateParams,n=e.formUpdateStock,o=e.submitUpdateStock,i=e.productUpdatePageUrl;return[{Header:" ",accessor:function(e){return(0,a.jsxs)("div",{className:"btn-group",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-default dropdown-toggle dropdown-icon","data-toggle":"dropdown",children:(0,a.jsx)("span",{className:"sr-only",children:"Toggle Dropdown"})}),(0,a.jsx)("div",{className:"dropdown-menu",role:"menu",children:(0,a.jsx)(r.rU,{className:"dropdown-item",to:"".concat(i(e.product_id._id)),children:"Ubah Produk"})})]})}},{Header:"Kode Produk",accessor:"product_id.code"},{Header:"Nama Produk",accessor:"product_id.name"},{Header:"Status produk jika stok habis",accessor:function(e){var t=(e.product_id||{}).preorder_policy;return"unavailable"===t?"Habis":t}},{Header:"Ubah Stok",accessor:function(e){return n({dataDetail:e,stateParams:t,submitUpdateStock:o})}}]}},67581:function(e,t,n){n.r(t);var r=n(29439),a=n(4942),o=n(1413),i=n(72791),c=n(48298),d=n(78881),u=n(9571),s=n(16585),l=n(55699),p=n(5620),m=n(38626),f=n(85545),_=n(80184);function g(e){var t=e.dataDetail,n=e.stateParams,r=n.stateStockProduct,i=n.setStateStockProduct,c=n.stateLoadingUpdateStock,d=e.submitUpdateStock,u=t,s=u.inventories[0]._id;return(0,_.jsxs)("div",{className:"input-group mb-0",children:[(0,_.jsx)("input",{id:"stock_field_".concat(s),type:"number",className:"form-control rounded-0",value:void 0===r[""+s]?u.inventories[0].quantity:r[""+s],onChange:function(e){return i((0,o.Z)((0,o.Z)({},r),{},(0,a.Z)({},""+s,parseInt(e.target.value))))}}),(0,_.jsx)("span",{className:"input-group-append",children:function(){var e=!1;return void 0!==r[""+s]&&r[""+s]!==u.inventories[0].quantity||(e=!0),c[""+s]?(0,_.jsx)("button",{type:"button",className:"btn btn-info btn-flat",onClick:function(){},children:(0,_.jsx)(m.Z,{size:15,loading:!0,type:"rpmerah"})}):(0,_.jsx)("button",{type:"button",className:"btn btn-info btn-flat",disabled:e,onClick:function(){return d({value:r[""+s],id:s})},children:"Simpan"})}()})]})}t.default=function(e){var t=i.useState({}),n=(0,r.Z)(t,2),m=n[0],b=n[1],k=i.useState({}),v=(0,r.Z)(k,2),h=v[0],y=v[1],P={stateStockProduct:m,setStateStockProduct:b,stateLoadingUpdateStock:h,setStateLoadingUpdateStock:y};console.log("renderrrrr table");var j=(0,l.Pu)({history:e.history,stateParams:P,formUpdateStock:g,submitUpdateStock:function(e){var t=e.value,n=e.id;console.log("submitUpdateStock===>",t),console.log("submitUpdateStock id===>",n),y((0,o.Z)((0,o.Z)({},h),{},(0,a.Z)({},""+n,!0)));var r='\n    mutation{\n      updateTokoInventory(_id: "'.concat(n,'",  quantity: ').concat(t,") {\n        error\n        status\n      }\n    }\n    "),i=JSON.stringify({query:r});console.log("bodyQueryString=====>",i);var d={method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",hmac:(0,f.lZ)(i),AccessToken:(0,f.hP)()},body:i};fetch(s.Z.hostBackend+s.Z.graphqlPath,d).then((function(e){return e.json()})).then((function(e){var t=(0,c.Z)(["data","updateTokoInventory","status"],e);y((0,o.Z)((0,o.Z)({},h),{},(0,a.Z)({},""+n,!1))),200===t?(0,f.Ce)("success","success"):(0,f.Ce)("rubah stok gagal","error")}))},productUpdatePageUrl:p.ZP.upsertPageUrl});return(0,_.jsx)(d.Z,{pageTitle:l.oj,breadcrumb:[{title:"Beranda",link:s.Z.appHomePage},{title:l.oj,link:null,isActive:!0}],contentHeaderTitle:l.oj,isNeedLoggedin:!0,children:(0,_.jsx)("div",{className:"row",children:(0,_.jsx)("div",{className:"col-md-12",children:(0,_.jsx)(u.iA,{listallServiceName:l.O_,fields:l.XU,columns:j,createNewButtonLabel:l.dV,cardTitle:l.oj})})})})}}}]);
//# sourceMappingURL=7581.68c96883.chunk.js.map